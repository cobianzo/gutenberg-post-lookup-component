!function(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["post-lookup"]=e():n["post-lookup"]=e()}(this,(()=>(()=>{"use strict";var n={n:e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return n.d(o,{a:o}),o},d:(e,o)=>{for(var t in o)n.o(o,t)&&!n.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:o[t]})},o:(n,e)=>Object.prototype.hasOwnProperty.call(n,e)},e={};n.d(e,{default:()=>d});const o=window.ReactJSXRuntime,t=window.wp.element,r=window.wp.components,c=window.wp.i18n,i=window.React,s=window.wp.apiFetch;var l=n.n(s);const a=window.wp.data;function u(n){return(0,o.jsx)("button",{onClick:n.onClick,type:"button",className:"x-button components-button block-editor-inspector-popover-header__action has-icon","aria-label":"Close",children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24","aria-hidden":"true",focusable:"false",children:(0,o.jsx)("path",{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})})})}const d=function(n){var e=n.selectedPostId,s=n.postType,d=void 0===s?"post":s,p=n.updateSelectedPostId,f=(0,t.useState)(null),h=f[0],x=f[1],m=function(n,e){var o=(0,i.useState)(n),t=o[0],r=o[1];return(0,i.useEffect)((function(){var o=setTimeout((function(){r(n)}),e);return function(){clearTimeout(o)}}),[n,e]),t}(h,300),v=function(n,e){void 0===e&&(e="post");var o=(0,t.useState)([]),r=o[0],c=o[1],i=(0,t.useState)(!1),s=i[0],a=i[1],u=(0,t.useState)(null),d=u[0],p=u[1];return(0,t.useEffect)((function(){if(n){a(!0),p(null);var o="/wp/v2/".concat("post"===e?"posts":e);o+="?search=".concat(encodeURIComponent(n)),o+="&per_page=10",l()({path:o}).then((function(n){c(n),a(!1)})).catch((function(n){console.error("Error in fetchAPI for endpoint:",o,n),p("Failed to fetch posts"+n.message),a(!1)}))}else c([])}),[n,e]),{posts:r,loading:s,error:d}}(m,d),b=v.posts,w=v.loading,g=v.error,_=function(n,e){void 0===e&&(e="post");var o=(0,t.useState)(!1),r=o[0],c=o[1];return{post:(0,a.useSelect)((function(o){if(!n)return null;var t=o("core").getEntityRecord;return c(!1),t("postType",e,n)}),[n,e]),isLoading:r}}(e,d).post,j=(0,t.useRef)(null);(0,t.useEffect)((function(){console.log(" > PostLookup init in  production Mode");var n=document.createElement("style");return n.textContent="\n  .interface-complementary-area .components-panel {\n    z-index: 9;\n  }\n\n  .coco__post-lookup {\n    position: relative;\n\n    input.components-text-control__input {\n      padding-right: 40px;\n    }\n\n    .x-button {\n      position: absolute;\n      top: 60px;\n      right: 10px;\n    }\n\n    .post-lookup__inner-row {\n      position: relative;\n    }\n    .post-lookup__inner-row .x-button {\n      top: 10px;\n    }\n\n    ul {\n      background: #fffffff4;\n      padding: 0 0.5rem;\n      border: 1px solid #ccc;\n      box-shadow: 1px 7px 9px -9px #000000;\n      position: absolute;\n      width: 100%;\n      top: 74px;\n    }\n\n    li {\n      padding: 0;\n      border-bottom: 1px solid #cccccc;\n      margin: 0;\n    }\n\n    li button {\n      width: 100%;\n    }\n\n    button.button--unstyled {\n      display: flex;\n      gap: 1rem;\n      padding: 0.5rem;\n      align-items: center;\n      cursor: pointer;\n      background: transparent;\n      border: 0;\n      color: var( --wp-components-color-accent, var( --wp-admin-theme-color, #3858e9 ) );\n    }\n\n    button.button--unstyled:hover {\n      background-color: rgba( var( --wp-admin-theme-color--rgb ), 0.04 );\n    }\n  }\n",document.head.appendChild(n),function(){document.head.removeChild(n)}}),[]);var k=(0,t.useCallback)((function(n){x(n)}),[]);return(0,o.jsxs)("div",{className:"coco__post-lookup",children:[(0,o.jsx)("div",{className:"post-lookup__preview",children:e?(0,o.jsx)("p",{children:" "}):(0,o.jsx)("p",{children:"No post selected"})}),e&&(null==_?void 0:_.id)&&null===h?(0,o.jsxs)("div",{className:"post-lookup__preview",children:[(0,o.jsx)("p",{children:"SELECTED POST:"}),(0,o.jsxs)("div",{className:"post-lookup__inner-row",children:[(0,o.jsxs)("button",{className:"button--unstyled",onClick:function(){x(""),setTimeout((function(){var n;return null===(n=j.current)||void 0===n?void 0:n.focus()}),500)},children:[(0,o.jsx)("span",{className:"dashicons dashicons-edit"}),_.title.rendered]}),e&&e>0?(0,o.jsx)(u,{onClick:function(){return n.updateSelectedPostId(0)}}):""]})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.TextControl,{label:(0,c.__)("Search for a post","coco")+" (".concat(d,")"),value:h||"",onChange:k,placeholder:(0,c.__)("Search…","coco"),ref:j}),e&&e>0?(0,o.jsx)(u,{onClick:function(){return x(null)}}):null,w&&(0,o.jsx)(r.Spinner,{}),g&&(0,o.jsx)("div",{className:"notice notice-error",children:(0,o.jsx)("p",{children:(0,c.__)("Error:","coco")+g})}),b.length>0&&(0,o.jsx)("ul",{children:b.map((function(n){return(0,o.jsx)("li",{children:(0,o.jsx)("button",{className:"button--unstyled",onClick:function(){return e=n.id,p(e),void x(null);var e},children:n.title.rendered})},n.id)}))}),e?(0,o.jsxs)("p",{children:[" ",(0,c.__)("Selected post ID:","coco")+e," "]}):null]})]})};return e.default})()));