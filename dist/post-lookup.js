!function(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["post-lookup"]=e():n["post-lookup"]=e()}(this,(()=>(()=>{"use strict";var n={n:e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},d:(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},o:(n,e)=>Object.prototype.hasOwnProperty.call(n,e)},e={};n.d(e,{default:()=>d});const t=window.ReactJSXRuntime,o=window.wp.element,r=window.wp.components,c=window.wp.i18n,i=window.React,s=window.wp.apiFetch;var l=n.n(s);const u=window.wp.data;function a(n){return(0,t.jsx)("button",{onClick:n.onClick,type:"button",className:"x-button components-button block-editor-inspector-popover-header__action has-icon","aria-label":"Close",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24","aria-hidden":"true",focusable:"false",children:(0,t.jsx)("path",{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})})})}const d=function(n){var e=n.selectedPostId,s=n.updateSelectedPostId,d=(0,o.useState)(null),p=d[0],f=d[1],h=function(n,e){var t=(0,i.useState)(n),o=t[0],r=t[1];return(0,i.useEffect)((function(){var t=setTimeout((function(){r(n)}),e);return function(){clearTimeout(t)}}),[n,e]),o}(p,300),x=function(n){var e=(0,o.useState)([]),t=e[0],r=e[1],c=(0,o.useState)(!1),i=c[0],s=c[1],u=(0,o.useState)(null),a=u[0],d=u[1];return(0,o.useEffect)((function(){n?(s(!0),d(null),l()({path:"/wp/v2/posts?search=".concat(encodeURIComponent(n),"&per_page=10")}).then((function(n){r(n),s(!1)})).catch((function(n){d("Failed to fetch posts"+n.message),s(!1)}))):r([])}),[n]),{posts:t,loading:i,error:a}}(h),m=x.posts,b=x.loading,v=x.error,w=function(n){var e=(0,o.useState)(!1),t=e[0],r=e[1];return{post:(0,u.useSelect)((function(e){if(!n)return null;var t=e("core").getEntityRecord;return r(!1),t("postType","post",n)}),[n]),isLoading:t}}(e).post,_=(0,o.useRef)(null);(0,o.useEffect)((function(){var n=document.createElement("style");return n.textContent="\n  .coco__post-lookup {\n    position: relative;\n\n    input.components-text-control__input {\n      padding-right: 40px;\n    }\n\n    .x-button {\n      position: absolute;\n      top: 60px;\n      right: 10px;\n    }\n\n    .post-lookup__inner-row {\n      position: relative;\n    }\n    .post-lookup__inner-row .x-button {\n      top: 10px;\n    }\n\n    ul {\n      background: #fffffff4;\n      padding: 0 0.5rem;\n      border: 1px solid #ccc;\n      box-shadow: 1px 7px 9px -9px #000000;\n      position: absolute;\n      width: 100%;\n      top: 74px;\n    }\n\n    li {\n      padding: 0;\n      border-bottom: 1px solid #cccccc;\n      margin: 0;\n    }\n\n    li button {\n      width: 100%;\n    }\n\n    button.button--unstyled {\n      display: flex;\n      gap: 1rem;\n      padding: 0.5rem;\n      align-items: center;\n      cursor: pointer;\n      background: transparent;\n      border: 0;\n      color: var( --wp-components-color-accent, var( --wp-admin-theme-color, #3858e9 ) );\n    }\n\n    button.button--unstyled:hover {\n      background-color: rgba( var( --wp-admin-theme-color--rgb ), 0.04 );\n    }\n  }\n",document.head.appendChild(n),function(){document.head.removeChild(n)}}));var g=(0,o.useCallback)((function(n){f(n)}),[]);return(0,t.jsxs)("div",{className:"coco__post-lookup",children:[(0,t.jsx)("div",{className:"post-lookup__preview",children:e?(0,t.jsx)("p",{children:" "}):(0,t.jsx)("p",{children:"No post selected"})}),e&&(null==w?void 0:w.id)&&null===p?(0,t.jsxs)("div",{className:"post-lookup__preview",children:[(0,t.jsx)("p",{children:"SELECTED POST:"}),(0,t.jsxs)("div",{className:"post-lookup__inner-row",children:[(0,t.jsxs)("button",{className:"button--unstyled",onClick:function(){f(""),setTimeout((function(){var n;return null===(n=_.current)||void 0===n?void 0:n.focus()}),500)},children:[(0,t.jsx)("span",{className:"dashicons dashicons-edit"}),w.title.rendered]}),e&&e>0?(0,t.jsx)(a,{onClick:function(){return n.updateSelectedPostId(0)}}):""]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.TextControl,{label:(0,c.__)("Search for a post","coco"),value:p||"",onChange:g,placeholder:(0,c.__)("Search…","coco"),ref:_}),e&&e>0?(0,t.jsx)(a,{onClick:function(){return f(null)}}):null,b&&(0,t.jsx)(r.Spinner,{}),v&&(0,t.jsx)("div",{className:"notice notice-error",children:(0,t.jsx)("p",{children:(0,c.__)("Error:","coco")+v})}),m.length>0&&(0,t.jsx)("ul",{children:m.map((function(n){return(0,t.jsx)("li",{children:(0,t.jsx)("button",{className:"button--unstyled",onClick:function(){return e=n.id,s(e),void f(null);var e},children:n.title.rendered})},n.id)}))}),e?(0,t.jsxs)("p",{children:[" ",(0,c.__)("Selected post ID:","coco")+e," "]}):null]})]})};return e.default})()));